<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/pages/BMAZBaseTemplate.xhtml">

	<ui:define name="body">
	<script type="text/javascript">
setTimeout(function focusIt()
{
  var mytext = document.getElementById("form:demand0"); 
  mytext.focus(); 
  mytext.select();
}
, 1);

window.history.forward();
function noBack() { window.history.forward();}
</script>
		<h:form id="form">
			<div id="product_list">
				<!--[if !IE]>start table_wrapper<![endif]-->
				<div class="table_wrapper">
					<div class="table_wrapper_inner">
						<div class="title_wrapper">
							<h2>Tariff DCB</h2>
							<span class="title_wrapper_left"></span>
							 <span class="title_wrapper_right"></span>
						</div>
						
					 <div class="error">
				        <div class="error_inner">
					    <span><p:messages showDetail="false" id="erMsg"/></span>
				        </div>
			          </div>

						<table width="100%">
							<tr>
								<td class="box text">Section</td>
								<td><p:selectOneMenu value="#{pc_tariffDCA.dcaBean.secId}" tabindex="1" >
								
										<f:selectItems value="#{pc_tariffDCA.seclst}" />
										<p:ajax listener="#{pc_tariffDCA.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu>
								</td>
								<td class="box text">Month</td>
								<td><p:selectOneMenu value="#{pc_tariffDCA.dcaBean.monthId}" tabindex="2">
								<f:selectItem itemLabel="--Month--" itemValue="0"/>
										<f:selectItems value="#{pc_tariffDCA.enums}" />
										<p:ajax listener="#{pc_tariffDCA.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu></td>
								<td class="box text">Year</td>
								<td>
								<p:selectOneMenu value="#{pc_tariffDCA.dcaBean.yearId}" tabindex="3">
								  <f:selectItem itemLabel="Select" itemValue="0"/>
								  <f:selectItem itemLabel="2012" itemValue="2012"/>
								  <f:selectItem itemLabel="2013" itemValue="2013"/>
								  <p:ajax listener="#{pc_tariffDCA.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
								</p:selectOneMenu></td>
					<td><h:commandButton action="#{pc_tariffDCA.getTariffDetails}" value="OK" styleClass="greenBtn" tabindex="4"/> </td>			
							</tr>
						
						
                        <c:if test="#{pc_tariffDCA.displayLst==true}">
						
						<tr>     <td align="center" class="box text" >
								<h:outputText value="" />
								</td>
								<td align="center" class="box text" colspan="2" style="text-align:center">
								<h:outputText value="(In Lakhs)" />
								</td>
								<td align="center" class="box text" colspan="2" style="text-align:center">
								<h:outputText value="(In Lakhs)" />
								</td>
								<td align="center" class="box text" colspan="2" style="text-align:center">
								</td>
								
								
								
							</tr>
							<tr>
								<td align="center" class="box text" style="text-align:center">Tariff</td>
								<td align="center" class="box text" colspan="2" style="text-align:center">Demand</td>
								<td align="center" class="box text" colspan="2" style="text-align:center">Consumption</td>
								<td align="center" class="box text" colspan="2" style="text-align:center">ARR</td>
								
							</tr>
							<c:forEach var="tarf" items="#{pc_tariffDCA.dcaBean.arlTarif}" varStatus="count">
								<tr>
									<td class="box text">#{tarf.tarifName} </td>
									<td colspan="2" style="text-align:center">
										<table>
											<tr style="text-align:center">
												<td style="text-align:center">
												<h:inputText id="demand${count.index}"  value="#{tarf.demand}" style="text-align:right" tabindex="5">
												<f:convertNumber pattern="#,###,##0.00"/>
													<p:ajax event="blur" update="ttD,tA${count.index},ttA" listener="#{pc_tariffDCA.ttlDemandM}" />
												</h:inputText>  
												</td>
												
											</tr>
											
										</table></td>
									<td colspan="2">
										<table>
											<tr>
												<td><h:inputText  value="#{tarf.consumption}" style="text-align:right" tabindex="5" >
												<f:convertNumber pattern="#,###,##0.00"/>
													<p:ajax event="blur" update="ttC,tA${count.index},ttA" listener="#{pc_tariffDCA.ttlConsumTn}" />
												</h:inputText></td>
											
											</tr>
											
										</table></td>
									<td colspan="2">
										<table>
											<tr>
												<td><h:inputText disabled="true" id ="tA${count.index}" value="#{tarf.arr}" style="text-align:right" tabindex="5">
												<f:convertNumber pattern="#,###,##0.00"/>
													<p:ajax event="blur" update="ttA" listener="#{pc_tariffDCA.ttlArr}" />
												</h:inputText></td>
												
											</tr>
											
										</table></td>
									
								</tr>
							</c:forEach>
							
							<tr >
								<td><table>
											<tr>
												<td> Total</td></tr></table></td>
								<td colspan="2" style="text-align:center">
								<table>
											<tr>
												<td> 
								<h:inputText id="ttD" value="#{pc_tariffDCA.dcaBean.ttlDemand}" style="text-align:right" disabled="true">
								<f:convertNumber pattern="#,###,##0.00"/></h:inputText>
								</td></tr></table></td>
								<td colspan="2" style="text-align:center">
								<table>
											<tr>
												<td > 
								<h:inputText id="ttC" value="#{pc_tariffDCA.dcaBean.ttlConsumption}" style="text-align:right" disabled="true">
								<f:convertNumber pattern="#,###,##0.00"/></h:inputText>
								</td></tr></table></td>
								<td colspan="2" style="text-align:center">
								<table>
											<tr>
												<td > 
								<h:inputText id="ttA" value="#{pc_tariffDCA.dcaBean.ttlArr}" style="text-align:right" disabled="true">
								<f:convertNumber pattern="#,###,##0.00"/></h:inputText>
								</td></tr></table></td>
								
							</tr>
							</c:if>
							<tr>
								
								<td colspan="3"></td>
								
								<td colspan="2" align="right"><strong><h:commandButton id="saveBtn"
											value="Save" action="#{pc_tariffDCA.saveDetails}"
											tabindex="6" styleClass="#{pc_tariffDCA.btnCss}" disabled="#{pc_tariffDCA.btnDisable}" />
										
								</strong>
								</td>
								<td colspan="2" > <h:commandButton value="Cancel"
										action="./home.jsf" tabindex="7"
										styleClass="greenBtn" />
								</td>
							</tr>

						</table>
                         

					</div>
				</div>
			</div>

		</h:form>


	</ui:define>
</ui:composition>
