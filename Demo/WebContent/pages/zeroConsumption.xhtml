<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/pages/BMAZBaseTemplate.xhtml">

	<ui:define name="body">
		<h:form id="form">
			<div id="product_list">
				<!--[if !IE]>start table_wrapper<![endif]-->
				<div class="table_wrapper">
					<div class="table_wrapper_inner">
						<div class="title_wrapper">
							<h2>Zero Consumption</h2>
							<span class="title_wrapper_left"></span> <span
								class="title_wrapper_right"></span>
						</div>

						<table width="100%">
						 <tr> 
						 	<p:messages id="erMsg" closable="true">
						 		<p:effect type="pulsate" event="load" delay="1000">  
						            <f:param name="mode" value="'show'" />  
						        </p:effect>  
						 	</p:messages> </tr>
							<tr>
								<p:focus for="sect"></p:focus>
								<td class="box text">Section</td>
								<td><p:selectOneMenu id="sect" value="#{pc_zeroConsumption.zeroConsumBean.secId}" tabindex="1">
										<f:selectItems value="#{pc_zeroConsumption.secList}" />
										<p:ajax listener="#{pc_zeroConsumption.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu>
								</td>
								<td class="box text">Month</td>
								<td><p:selectOneMenu value="#{pc_zeroConsumption.zeroConsumBean.monthId}" tabindex="2">
										<f:selectItem itemLabel="Select" itemValue="0"/>
										<f:selectItems value="#{pc_zeroConsumption.enumMonths}" />
										<p:ajax listener="#{pc_zeroConsumption.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu></td>
								<td class="box text">Year</td>
								<td><p:selectOneMenu value="#{pc_zeroConsumption.zeroConsumBean.yearId}" tabindex="3">
								  <f:selectItem itemLabel="Select" itemValue="0"/>
								  <f:selectItem itemLabel="2012" itemValue="2012"/>
								  <f:selectItem itemLabel="2013" itemValue="2013"/>
								  <p:ajax listener="#{pc_zeroConsumption.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
								</p:selectOneMenu></td>
								<td><h:commandButton value="OK" action="#{pc_zeroConsumption.getZeroConDetails}" styleClass="greenBtn" tabindex="4"/></td>
							</tr>
						 </table>	
				         
				         <table width="100%">
				         <c:if test="#{pc_zeroConsumption.displayList}">
						  <tr>
						  	<p:focus for="inspecDne"></p:focus>
						    <td  class="box text">No. of Inspections done</td>
						    <td  class="box text"><p:inputText id="inspecDne" value="#{pc_zeroConsumption.zeroConsumBean.noInspection}"  styleClass="right_input" tabindex="4"/> </td>
						    <td  class="box text" ></td>
						    <td  class="box text"></td>
						    <td  class="box text"></td>
						    <td  class="box text"></td>
						    
               			</tr>
               			
               			
               			
						  
						  <tr>
						    <td  class="box text" colspan="0">Discrepancy</td>
						    <td  class="box text" colspan="2">No.of Zero Consumption(count)</td>
						    <td  class="box text" colspan="3">Demand Raised(In Lakhs)</td>
						    
						  </tr>
						 
						 <c:forEach var="discrep" items="#{pc_zeroConsumption.zeroConsumBean.list}">
						 	<tr>
								<td class="box text" colspan="0">#{discrep.discrepancyNme}</td>
								<td class="box text" colspan="2">
									<p:inputText value="#{discrep.noOfZeroConsum}"  styleClass="right_input" tabindex="6">
										<p:ajax event="blur" listener="#{pc_zeroConsumption.totalCountForZeroConsumption}" update="count"/>
									</p:inputText>
								 </td>
								<td class="box text" colspan="3">
									<p:inputText value="#{discrep.demandRasied}" styleClass="right_input" tabindex="6">
										<p:ajax event="blur" listener="#{pc_zeroConsumption.totalAmntRaised}" update="amount"/>
										<f:convertNumber  pattern="##,####,##0.00"/>
									</p:inputText>
								</td>		
								
								 	
						 	</tr>
						 </c:forEach>


								<tr>
									<td class="box text" align="right">Total</td>
									<td class="box text" colspan="2"><p:inputText id="count"
											value="#{pc_zeroConsumption.zeroConsumBean.grandTotlZeroCon}"
											disabled="true" styleClass="right_input" />
									</td>
									<td class="box text" colspan="3">
									<p:inputText id="amount"
									value="#{pc_zeroConsumption.zeroConsumBean.grandTotlDemaRaised}"
									disabled="true" styleClass="right_input">
									<f:convertNumber for="amount" pattern="##,####,##0.00" />
									</p:inputText>
									</td>									
								</tr>
								<tr>
						    <td  class="box text">Reason</td>
						    <td  class="box text" colspan="5"><p:inputTextarea autoResize="true" value="#{pc_zeroConsumption.zeroConsumBean.reason}"   tabindex="7" cols="50" rows="5" /> </td>
				
						    
               			</tr>
						</c:if>
               			<tr>	
						    <td></td>
							<td></td>
							<td></td>
							<td></td>
							
							<td  align="right" class="box text"><strong>
								<h:commandButton value="Save" action="#{pc_zeroConsumption.saveZeroConsum}" tabindex="8" styleClass="#{pc_zeroConsumption.btnCss}" disabled="#{pc_zeroConsumption.btnDisable}" id="saveBtn"/> 
								</strong>
							</td>
							<td class="box text" >
								<h:commandButton value="Cancel" action="#{pc_zeroConsumption.cancelOk}" tabindex="9" styleClass="greenBtn" />
							</td>
						</tr>
						
						
						</table>


					</div>
				</div>
			</div>

		</h:form>


	<script type="text/javascript">
setTimeout(function focusIt()
{
  var mytext = document.getElementById("form:inspecDne"); 
  mytext.focus(); 
  mytext.select();
}
, 1);
window.history.forward();
function noBack() { window.history.forward();}
</script>
	</ui:define>
</ui:composition>
