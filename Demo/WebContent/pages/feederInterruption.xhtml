<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/pages/BaseTemplate.xhtml">

	<ui:define name="body" onload="noBack();"
		onpageshow="if (event.persisted) noBack();">

		<script type="text/javascript">
setTimeout(function focusIt()
{
  var mytext = document.getElementById("form:count0"); 
  mytext.focus(); 
  mytext.select();
}
, 1);

window.history.forward();
function noBack() { window.history.forward();}
</script>

		<h:form id="form">
			<div id="product_list">
				<!--[if !IE]>start table_wrapper<![endif]-->
				<div class="table_wrapper">
					<div class="table_wrapper_inner">
						<div class="title_wrapper">
							<h2>Feeder Interruption</h2>
							<span class="title_wrapper_left"></span> <span
								class="title_wrapper_right"></span>
					    </div>
						<table width="100%">
						<tr> <p:messages id="erMsg"/> </tr>
						    <tr align="center">
								<td class="box text" colspan="4"></td>
							</tr>
							<tr>
								<td class="box text">Section</td>
								<td class="box text"><p:selectOneMenu id="secId"  value="#{fd_interruption.fibean.sectionId}" tabindex="1" style="height: 25px;position: top">
										<f:selectItems value="#{fd_interruption.secList}" />
										<p:ajax listener="#{fd_interruption.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu></td>

								<td class="box text">Month</td>
								<td class="box text"><p:selectOneMenu id="mnthId" value="#{fd_interruption.fibean.monthId}" tabindex="2"  style="height: 25px;position: top">
										<f:selectItem itemLabel="Select" itemValue="0" />
										<f:selectItems value="#{fd_interruption.enumMonthlist}" />
										<p:ajax listener="#{fd_interruption.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu></td>

								<td class="box text">Year</td>
								<td class="box text"><p:selectOneMenu id="yrId" value="#{fd_interruption.fibean.yearId}" tabindex="3"  style="height: 25px;position: top">
										<f:selectItem itemLabel="Select" itemValue="0" />
										<f:selectItem itemLabel="2012" itemValue="2012" />
										<f:selectItem itemLabel="2013" itemValue="2013" />
										<p:ajax listener="#{fd_interruption.disableSaveButton}" update="saveBtn,erMsg"></p:ajax>
									</p:selectOneMenu></td>
									
								<td class="box text"  align="right" ><strong>
									<h:commandButton value="OK" action="#{fd_interruption.getFeederLst}" tabindex="4" required="true" styleClass="greenBtn" /> </strong>
								</td>
							</tr>
							<c:if test="#{fd_interruption.displayLst == true}">
								<tr>
									<td align="right" class="box text" colspan="1">Feeder </td>
									<td align="right" class="box text" colspan="1">No. of Times Tripped Count</td>
									<td align="right" class="box text" colspan="5">Reasons</td>
								</tr>
								<c:forEach  var="feederlist" varStatus="feeder"
									items="#{fd_interruption.fibean.feedList}">
									<tr>
										<td class="box text" colspan="1">#{feederlist.fdr_Nmae}</td>
	
										<td class="box text" colspan="1" >
											<p:inputText id="count${feeder.index}" styleClass="right_input" value="#{feederlist.fdrtripped_count}"  tabindex="5">
												<p:ajax event="blur" listener="#{fd_interruption.increment}" update="totalCnt" />
											</p:inputText>
										</td>
	
										<td class="box text" colspan="6">
											<p:inputTextarea id="reason${feeder.index}" cols="30" rows="2" value="#{feederlist.fdr_rsn}"  tabindex="5" >
											</p:inputTextarea>
										</td>
									</tr>
								</c:forEach>
	
								<tr>
									<td class="box text" colspan="1" >Total</td>
	
									<td class="box text" colspan="1"><p:inputText id="totalCnt"
											value="#{fd_interruption.fibean.totalFstripped_Count}"
											disabled="true" styleClass="right_input" />
									</td>
									<td class="box text" colspan="5">
									</td>
								</tr>
							</c:if>
	
								<tr>
	  								<td   class="box text"  align="right" colspan="5"></td>
									<td   class="box text"  align="right" colspan="1"><strong>
											<h:commandButton value="Save" id="saveBtn"
												action="#{fd_interruption.saveFDI}" tabindex="6"
												styleClass="#{fd_interruption.btnCss}" disabled="#{fd_interruption.btnDisable}" /> </strong>
									</td>
									
									<td  class="box text"  align="right"  colspan="1"><strong>
											<h:commandButton value="Cancel" action="#{fd_interruption.cancelOk}" tabindex="7"
												styleClass="greenBtn" /> </strong>
									</td>
								</tr>

						</table>

						

					</div>
				</div>
			</div>

		</h:form>


	</ui:define>
</ui:composition>
